# Google OAuth Setup for Expo Go

## Required Redirect URI Configuration

After fixing the Google Login implementation to use Expo Go's proxy flow, you need to configure the authorized redirect URI in the Google Cloud Console.

### Redirect URI for Expo Go

The correct redirect URI for this app when using Expo Go is:

```
https://auth.expo.io/@riciyt/app-m335
```

This URI is automatically generated by `AuthSession.makeRedirectUri({ useProxy: true })` based on:
- Owner: `riciyt` (from `app.json`)
- Slug: `app-m335` (from `app.json`)

### How to Add the Redirect URI to Google Cloud Console

1. Go to [Google Cloud Console](https://console.cloud.google.com/)
2. Select your Firebase project
3. Navigate to **APIs & Services** > **Credentials**
4. Find your OAuth 2.0 Client ID (the Web Client ID used in the app)
5. Click on the Client ID to edit it
6. In the **Authorized redirect URIs** section, click **+ ADD URI**
7. Add: `https://auth.expo.io/@riciyt/app-m335`
8. Click **Save**

### Verification

After adding the redirect URI:
1. Open the app in Expo Go
2. Tap "Continue with Google"
3. Complete the Google consent flow
4. You should be redirected back to the app successfully
5. The error "Something went wrong trying to finish signing in" should no longer appear

### Troubleshooting

**Error: "redirect_uri_mismatch"**
- Make sure you added the exact URI: `https://auth.expo.io/@riciyt/app-m335`
- Check that there are no trailing slashes
- Verify the owner and slug in `app.json` match the URI

**Error: "Something went wrong trying to finish signing in"**
- This was the original issue caused by using the wrong redirect URI
- After this fix, this error should be resolved

### For Development vs Production

- **Expo Go (Development)**: Use `https://auth.expo.io/@riciyt/app-m335`
- **Standalone Build**: If you later create a standalone build, you'll need to add platform-specific redirect URIs
- **Custom Development Client**: If you switch to a custom dev client, the redirect URI will be different

### Code Changes Made

The following changes were made to `src/screens/LoginScreen.tsx`:

1. **Line 41**: Changed from `AuthSession.getRedirectUrl('redirect')` to `AuthSession.makeRedirectUri({ useProxy: true })`
   - This generates the correct Expo Go proxy URL

2. **Line 80**: Changed from `promptAsync()` to `promptAsync({ useProxy: true })`
   - This ensures the authentication flow uses the Expo proxy

3. **Line 24**: Verified `WebBrowser.maybeCompleteAuthSession()` is called at module top-level
   - This is required for the auth session to complete properly

### Additional Notes

- No new libraries were added
- Firebase Auth with Google credential sign-in continues to work as before
- The fix is specific to Expo Go and does not require switching to a development client or bare workflow
- The `webClientId` remains the same in the configuration
